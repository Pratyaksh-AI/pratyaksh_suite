{"$message_type":"diagnostic","message":"borrowed data escapes outside of function","code":{"code":"E0521","explanation":"Borrowed data escapes outside of closure.\n\nErroneous code example:\n\n```compile_fail,E0521\nlet mut list: Vec<&str> = Vec::new();\n\nlet _add = |el: &str| {\n    list.push(el); // error: `el` escapes the closure body here\n};\n```\n\nA type annotation of a closure parameter implies a new lifetime declaration.\nConsider to drop it, the compiler is reliably able to infer them.\n\n```\nlet mut list: Vec<&str> = Vec::new();\n\nlet _add = |el| {\n    list.push(el);\n};\n```\n\nSee the [Closure type inference and annotation][closure-infere-annotation] and\n[Lifetime elision][lifetime-elision] sections of the Book for more details.\n\n[closure-infere-annotation]: https://doc.rust-lang.org/book/ch13-01-closures.html#closure-type-inference-and-annotation\n[lifetime-elision]: https://doc.rust-lang.org/reference/lifetime-elision.html\n"},"level":"error","spans":[{"file_name":"src/main.rs","byte_start":11019,"byte_end":11029,"line_start":275,"line_end":275,"column_start":43,"column_end":53,"is_primary":false,"text":[{"text":"fn nav_btn(ui: &mut egui::Ui, text: &str, icon_bytes: &[u8], active: bool) -> egui::Response {","highlight_start":43,"highlight_end":53}],"label":"`icon_bytes` is a reference that is only valid in the function body","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"src/main.rs","byte_start":11429,"byte_end":11493,"line_start":282,"line_end":282,"column_start":20,"column_end":84,"is_primary":true,"text":[{"text":"            ui.add(egui::Image::from_bytes(format!(\"bytes://{}\", text), icon_bytes).max_width(20.0).tint(fg));","highlight_start":20,"highlight_end":84}],"label":"`icon_bytes` escapes the function body here","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"src/main.rs","byte_start":11031,"byte_end":11032,"line_start":275,"line_end":275,"column_start":55,"column_end":56,"is_primary":false,"text":[{"text":"fn nav_btn(ui: &mut egui::Ui, text: &str, icon_bytes: &[u8], active: bool) -> egui::Response {","highlight_start":55,"highlight_end":56}],"label":"let's call the lifetime of this reference `'1`","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"src/main.rs","byte_start":11429,"byte_end":11493,"line_start":282,"line_end":282,"column_start":20,"column_end":84,"is_primary":true,"text":[{"text":"            ui.add(egui::Image::from_bytes(format!(\"bytes://{}\", text), icon_bytes).max_width(20.0).tint(fg));","highlight_start":20,"highlight_end":84}],"label":"argument requires that `'1` must outlive `'static`","suggested_replacement":null,"suggestion_applicability":null,"expansion":null}],"children":[],"rendered":"\u001b[1m\u001b[91merror[E0521]\u001b[0m\u001b[1m: borrowed data escapes outside of function\u001b[0m\n   \u001b[1m\u001b[94m--> \u001b[0msrc/main.rs:282:20\n    \u001b[1m\u001b[94m|\u001b[0m\n\u001b[1m\u001b[94m275\u001b[0m \u001b[1m\u001b[94m|\u001b[0m \u001b[1m\u001b[94m...\u001b[0mtn(ui: &mut egui::Ui, text: &str, icon_bytes: &[u8], active: bool) -> egui::Response {\n    \u001b[1m\u001b[94m|\u001b[0m                                      \u001b[1m\u001b[94m----------\u001b[0m  \u001b[1m\u001b[94m-\u001b[0m \u001b[1m\u001b[94mlet's call the lifetime of this reference `'1`\u001b[0m\n    \u001b[1m\u001b[94m|\u001b[0m                                      \u001b[1m\u001b[94m|\u001b[0m\n    \u001b[1m\u001b[94m|\u001b[0m                                      \u001b[1m\u001b[94m`icon_bytes` is a reference that is only valid in the function body\u001b[0m\n\u001b[1m\u001b[94m...\u001b[0m\n\u001b[1m\u001b[94m282\u001b[0m \u001b[1m\u001b[94m|\u001b[0m \u001b[1m\u001b[94m...\u001b[0m    ui.add(egui::Image::from_bytes(format!(\"bytes://{}\", text), icon_bytes).max_width(20.0).ti\u001b[1m\u001b[94m...\u001b[0m\n    \u001b[1m\u001b[94m|\u001b[0m               \u001b[1m\u001b[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\u001b[0m\n    \u001b[1m\u001b[94m|\u001b[0m               \u001b[1m\u001b[91m|\u001b[0m\n    \u001b[1m\u001b[94m|\u001b[0m               \u001b[1m\u001b[91m`icon_bytes` escapes the function body here\u001b[0m\n    \u001b[1m\u001b[94m|\u001b[0m               \u001b[1m\u001b[91margument requires that `'1` must outlive `'static`\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"aborting due to 1 previous error","code":null,"level":"error","spans":[],"children":[],"rendered":"\u001b[1m\u001b[91merror\u001b[0m\u001b[1m: aborting due to 1 previous error\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"For more information about this error, try `rustc --explain E0521`.","code":null,"level":"failure-note","spans":[],"children":[],"rendered":"\u001b[1mFor more information about this error, try `rustc --explain E0521`.\u001b[0m\n"}
